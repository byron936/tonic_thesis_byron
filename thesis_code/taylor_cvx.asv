% 假設 K, C, P_total, N, M 已定義
K = 40;
C = 
cvx_begin
    variables P(K) theta(K)
    expression obj
    obj = sum((1/2 + C ./ (P - C)) .* theta);
    minimize(obj)
    subject to
        sum(P ./ theta) <= P_total;
        P - C >= 1e-6;        % 保證 P > C
        0 < theta <= N;
        sum(1 ./ theta) <= M;
cvx_end
